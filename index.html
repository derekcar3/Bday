<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Happy 33rd Birthday - Caf√© Literary Quest</title> <style> * { margin: 0; padding: 0; box-sizing: border-box; }


Copy
    body {
        font-family: 'Georgia', serif;
        background: linear-gradient(135deg, #8B4513, #D2691E, #CD853F);
        overflow: hidden;
        touch-action: manipulation;
        user-select: none;
    }

    #gameContainer {
        width: 100vw;
        height: 100vh;
        position: relative;
        background: 
            radial-gradient(circle at 20% 20%, rgba(255,215,0,0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 60%, rgba(255,140,0,0.1) 0%, transparent 50%),
            linear-gradient(45deg, #8B4513 0%, #A0522D 50%, #8B4513 100%);
        background-attachment: fixed;
    }

    .bookshelf {
        position: absolute;
        width: 80px;
        height: 150px;
        background: linear-gradient(90deg, #654321 0%, #8B4513 50%, #654321 100%);
        border: 3px solid #4A4A4A;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .bookshelf:before {
        content: '';
        position: absolute;
        top: 25px;
        left: 8px;
        right: 8px;
        height: 20px;
        background: repeating-linear-gradient(90deg, #FF6B6B 0px, #FF6B6B 10px, #4ECDC4 10px, #4ECDC4 20px, #45B7D1 20px, #45B7D1 30px, #96CEB4 30px, #96CEB4 40px);
        border-radius: 3px;
    }

    .bookshelf:after {
        content: '';
        position: absolute;
        bottom: 25px;
        left: 8px;
        right: 8px;
        height: 20px;
        background: repeating-linear-gradient(90deg, #DDA0DD 0px, #DDA0DD 10px, #F0E68C 10px, #F0E68C 20px, #FFB6C1 20px, #FFB6C1 30px, #98FB98 30px, #98FB98 40px);
        border-radius: 3px;
    }

    .cafe-table {
        position: absolute;
        width: 60px;
        height: 60px;
        background: radial-gradient(circle, #8B4513 30%, #654321 70%);
        border-radius: 50%;
        border: 4px solid #4A4A4A;
        box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }

    .cafe-table:after {
        content: '‚òï';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    #player {
        position: absolute;
        width: 50px;
        height: 50px;
        background: linear-gradient(45deg, #FF6B9D, #FF8E53);
        border-radius: 50%;
        border: 4px solid #FFF;
        transition: all 0.1s ease;
        z-index: 100;
        box-shadow: 0 6px 12px rgba(0,0,0,0.4);
    }

    #player:before {
        content: 'üë©‚Äçü¶∞';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 28px;
    }

    .kid {
        position: absolute;
        width: 45px;
        height: 45px;
        background: linear-gradient(45deg, #FFE135, #FFA500);
        border-radius: 50%;
        border: 3px solid #FFF;
        transition: all 0.2s ease;
        z-index: 95;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    #cassian:before {
        content: 'üë¶';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    #charlie:before {
        content: 'üëß';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    .speech-bubble {
        position: absolute;
        background: white;
        border: 3px solid #FF69B4;
        border-radius: 15px;
        padding: 8px 12px;
        font-size: 12px;
        font-weight: bold;
        color: #8B008B;
        max-width: 120px;
        text-align: center;
        z-index: 150;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        opacity: 0;
        transform: scale(0);
        transition: all 0.3s ease;
    }

    .speech-bubble:after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-top: 10px solid #FF69B4;
    }

    .speech-bubble.show {
        opacity: 1;
        transform: scale(1);
    }

    .collectible {
        position: absolute;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        animation: float 2s ease-in-out infinite;
        z-index: 50;
        transition: transform 0.1s ease;
    }

    .collectible:hover {
        transform: scale(1.1);
    }

    .book {
        background: linear-gradient(45deg, #4ECDC4, #45B7D1);
        border: 3px solid #FFF;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .book:before {
        content: 'üìö';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    .coffee {
        background: linear-gradient(45deg, #D2691E, #8B4513);
        border: 3px solid #FFF;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .coffee:before {
        content: '‚òï';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    .healthy-snack {
        background: linear-gradient(45deg, #98FB98, #90EE90);
        border: 3px solid #FFF;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .healthy-snack:before {
        content: 'ü•ó';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    .running-shoe {
        background: linear-gradient(45deg, #FF1493, #FF69B4);
        border: 3px solid #FFF;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .running-shoe:before {
        content: 'üëü';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    .apple {
        background: linear-gradient(45deg, #FF6347, #FF4500);
        border: 3px solid #FFF;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .apple:before {
        content: 'üçé';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    .water {
        background: linear-gradient(45deg, #87CEEB, #4682B4);
        border: 3px solid #FFF;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .water:before {
        content: 'üíß';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
    }

    /* Negative Items */
    .dirty-dish {
        background: linear-gradient(45deg, #FF0000, #DC143C);
        border: 3px solid #8B0000;
        box-shadow: 0 4px 8px rgba(139,0,0,0.5);
        animation: float 2s ease-in-out infinite, shake 0.5s ease-in-out infinite;
    }

    .dirty-dish:before {
        content: 'üçΩÔ∏è';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        filter: brightness(0.7) contrast(1.2);
    }

    .laundry {
        background: linear-gradient(45deg, #FF0000, #B22222);
        border: 3px solid #8B0000;
        box-shadow: 0 4px 8px rgba(139,0,0,0.5);
        animation: float 2s ease-in-out infinite, shake 0.7s ease-in-out infinite;
    }

    .laundry:before {
        content: 'üëï';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 24px;
        filter: brightness(0.6) saturate(1.5);
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-15px); }
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0px) translateY(0px); }
        25% { transform: translateX(-2px) translateY(-2px); }
        75% { transform: translateX(2px) translateY(2px); }
    }

    .flex-hit {
        animation: flex-hit 0.3s ease-out;
    }

    @keyframes flex-hit {
        0% { transform: scale(1); }
        50% { transform: scale(1.3) rotate(5deg); }
        100% { transform: scale(1); }
    }

    #ui {
        position: fixed;
        top: 20px;
        left: 20px;
        right: 20px;
        z-index: 200;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    #score, #timer {
        background: rgba(0,0,0,0.8);
        color: #FFD700;
        padding: 12px 18px;
        border-radius: 25px;
        font-size: 20px;
        font-weight: bold;
        border: 3px solid #FFD700;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    #popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: linear-gradient(135deg, #FFE4E1, #FFF0F5);
        padding: 30px;
        border-radius: 20px;
        border: 4px solid #FF69B4;
        text-align: center;
        z-index: 300;
        display: none;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        max-width: 90%;
    }

    #popup h2 {
        color: #FF1493;
        margin-bottom: 15px;
        font-size: 24px;
    }

    #popup p {
        color: #8B008B;
        font-size: 18px;
        margin-bottom: 20px;
        line-height: 1.4;
    }

    #popup button {
        background: linear-gradient(45deg, #FF69B4, #FF1493);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: transform 0.2s;
    }

    #popup button:hover {
        transform: scale(1.05);
    }

    #startScreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #8B4513, #D2691E);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 400;
        text-align: center;
        padding: 20px;
    }

    #startScreen h1 {
        color: #FFD700;
        font-size: 28px;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    #startScreen p {
        color: #FFF;
        font-size: 16px;
        margin-bottom: 30px;
        line-height: 1.6;
    }

    #startButton {
        background: linear-gradient(45deg, #FF69B4, #FF1493);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 30px;
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
        transition: transform 0.2s;
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    #startButton:hover {
        transform: scale(1.1);
    }

    .particle {
        position: absolute;
        width: 6px;
        height: 6px;
        background: #FFD700;
        border-radius: 50%;
        pointer-events: none;
        animation: particle-float 3s ease-out forwards;
    }

    .negative-particle {
        background: #FF0000;
        animation: negative-particle-float 2s ease-out forwards;
    }

    @keyframes particle-float {
        0% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        100% {
            opacity: 0;
            transform: translateY(-100px) scale(0);
        }
    }

    @keyframes negative-particle-float {
        0% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
        100% {
            opacity: 0;
            transform: translateY(-80px) scale(0);
        }
    }

    @media (max-height: 600px) {
        #startScreen h1 { font-size: 24px; }
        #startScreen p { font-size: 14px; }
        #popup h2 { font-size: 20px; }
        #popup p { font-size: 16px; }
    }
</style>
</head> <body> <div id="startScreen"> <h1>üéâ Happy 33rd Birthday! üéâ</h1> <p>Welcome to your personalized Caf√© Literary Quest!<br> Explore the charming Parisian bookstore caf√©,<br> collect books, coffee, and healthy treats!<br> Cassian and Charlie will cheer you on!<br><br> üëÜ Tap anywhere to move<br> üìö Collect good items for points<br> üçΩÔ∏è Avoid dirty dishes and laundry!<br> ‚è∞ Beat the clock!</p> <button id="startButton">Start Your Adventure!</button> </div>


Copy
<div id="gameContainer">
    <div id="ui">
        <div id="score">Score: 0</div>
        <div id="timer">Time: 90</div>
    </div>
    <div id="player"></div>
    <div id="cassian" class="kid"></div>
    <div id="charlie" class="kid"></div>
</div>

<div id="popup">
    <h2 id="popupTitle"></h2>
    <p id="popupMessage"></p>
    <button onclick="closePopup()">Continue</button>
</div>

<script>
    // Game variables
    let score = 0;
    let timeLeft = 90;
    let gameRunning = false;
    let player = document.getElementById('player');
    let cassian = document.getElementById('cassian');
    let charlie = document.getElementById('charlie');
    let gameContainer = document.getElementById('gameContainer');
    let collectibles = [];
    let gameTimer;
    let spawnTimer;
    let speechTimer;
    
    // Player and kids positions
    let playerX = window.innerWidth / 2 - 25;
    let playerY = window.innerHeight / 2 - 25;
    let cassianX = playerX - 80;
    let cassianY = playerY + 60;
    let charlieX = playerX + 80;
    let charlieY = playerY - 60;
    
    // Speech bubble messages for kids
    const encouragingMessages = [
        "Go Mom! üí™",
        "You're amazing! ‚ú®",
        "Keep going! üåü",
        "Love you Mom! üíï",
        "You're the best! üèÜ",
        "Super Mom! ü¶∏‚Äç‚ôÄÔ∏è",
        "You got this! üí™",
        "Happy Birthday! üéÇ",
        "So proud! üåà",
        "You're awesome! ‚≠ê"
    ];
    
    const winMessages = [
        "Happy Birthday From Charlie, Cassian and Dada! üéâüíï",
        "You completed your literary caf√© adventure! üìö‚òï",
        "33 years of being absolutely wonderful! ‚ú®üéÇ"
    ];

    // Sound effects using Web Audio API
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    function playSound(frequency, duration, type = 'sine') {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);
        
        oscillator.frequency.value = frequency;
        oscillator.type = type;
        
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
        
        oscillator.start(audioContext.currentTime);
        oscillator.stop(audioContext.currentTime + duration);
    }

    function playCollectSound() {
        playSound(800, 0.2);
        setTimeout(() => playSound(1200, 0.1), 100);
    }

    function playNegativeSound() {
        playSound(200, 0.3, 'sawtooth');
    }

    function playWinSound() {
        const notes = [523, 659, 784, 1047];
        notes.forEach((note, index) => {
            setTimeout(() => playSound(note, 0.3), index * 200);
        });
    }

    // Initialize game
    function initGame() {
        updatePlayerPosition();
        updateKidsPositions();
        createStaticElements();
        
        // Touch controls
        gameContainer.addEventListener('touchstart', handleTouch, { passive: false });
        gameContainer.addEventListener('touchmove', handleTouch, { passive: false });
        gameContainer.addEventListener('click', handleClick);
        
        document.getElementById('startButton').addEventListener('click', startGame);
    }

    function createStaticElements() {
        // Create bookshelves in organized pattern
        const positions = [
            {x: 50, y: 120}, {x: 50, y: 320}, {x: 50, y: 520},
            {x: window.innerWidth - 130, y: 150}, {x: window.innerWidth - 130, y: 350}
        ];
        
        positions.forEach(pos => {
            if (pos.y < window.innerHeight - 170) {
                const bookshelf = document.createElement('div');
                bookshelf.className = 'bookshelf';
                bookshelf.style.left = pos.x + 'px';
                bookshelf.style.top = pos.y + 'px';
                gameContainer.appendChild(bookshelf);
            }
        });
        
        // Create caf√© tables in organized grid
        const tablePositions = [
            {x: 200, y: 180}, {x: 200, y: 350}, {x: 200, y: 520},
            {x: window.innerWidth - 260, y: 180}, {x: window.innerWidth - 260, y: 350},
            {x: window.innerWidth/2 - 30, y: 200}, {x: window.innerWidth/2 - 30, y: 400}
        ];
        
        tablePositions.forEach(pos => {
            if (pos.x > 100 && pos.x < window.innerWidth - 160 && pos.y < window.innerHeight - 120) {
                const table = document.createElement('div');
                table.className = 'cafe-table';
                table.style.left = pos.x + 'px';
                table.style.top = pos.y + 'px';
                gameContainer.appendChild(table);
            }
        });
    }

    function handleTouch(e) {
        e.preventDefault();
        if (!gameRunning) return;
        
        const touch = e.touches[0] || e.changedTouches[0];
        movePlayerTo(touch.clientX, touch.clientY);
    }

    function handleClick(e) {
        if (!gameRunning) return;
        movePlayerTo(e.clientX, e.clientY);
    }

    function movePlayerTo(x, y) {
        playerX = Math.max(25, Math.min(window.innerWidth - 75, x - 25));
        playerY = Math.max(90, Math.min(window.innerHeight - 75, y - 25));
        updatePlayerPosition();
    }

    function updatePlayerPosition() {
        player.style.left = playerX + 'px';
        player.style.top = playerY + 'px';
    }

    function updateKidsPositions() {
        // Kids follow with different patterns and avoid overlap
        const followSpeed = 0.15;
        const minDistance = 70; // Minimum distance between kids
        
        // Cassian follows with offset
        const cassianTargetX = playerX - 90 + Math.sin(Date.now() * 0.001) * 20;
        const cassianTargetY = playerY + 70 + Math.cos(Date.now() * 0.001) * 15;
        
        cassianX += (cassianTargetX - cassianX) * followSpeed;
        cassianY += (cassianTargetY - cassianY) * followSpeed;
        
        // Charlie follows with different offset
        const charlieTargetX = playerX + 90 + Math.cos(Date.now() * 0.0008) * 25;
        const charlieTargetY = playerY - 70 + Math.sin(Date.now() * 0.0008) * 20;
        
        charlieX += (charlieTargetX - charlieX) * followSpeed;
        charlieY += (charlieTargetY - charlieY) * followSpeed;
        
        // Prevent kids from overlapping
        const distanceBetweenKids = Math.sqrt(Math.pow(cassianX - charlieX, 2) + Math.pow(cassianY - charlieY, 2));
        if (distanceBetweenKids < minDistance) {
            const angle = Math.atan2(charlieY - cassianY, charlieX - cassianX);
            const pushDistance = (minDistance - distanceBetweenKids) / 2;
            
            cassianX -= Math.cos(angle) * pushDistance;
            cassianY -= Math.sin(angle) * pushDistance;
            charlieX += Math.cos(angle) * pushDistance;
            charlieY += Math.sin(angle) * pushDistance;
        }
        
        // Keep kids on screen
        cassianX = Math.max(25, Math.min(window.innerWidth - 70, cassianX));
        cassianY = Math.max(90, Math.min(window.innerHeight - 70, cassianY));
        charlieX = Math.max(25, Math.min(window.innerWidth - 70, charlieX));
        charlieY = Math.max(90, Math.min(window.innerHeight - 70, charlieY));
        
        cassian.style.left = cassianX + 'px';
        cassian.style.top = cassianY + 'px';
        charlie.style.left = charlieX + 'px';
        charlie.style.top = charlieY + 'px';
    }

    function showSpeechBubble(kid, message) {
        // Remove existing speech bubble
        const existingBubble = kid.querySelector('.speech-bubble');
        if (existingBubble) {
            existingBubble.remove();
        }
        
        const bubble = document.createElement('div');
        bubble.className = 'speech-bubble';
        bubble.textContent = message;
        bubble.style.bottom = '55px';
        bubble.style.left = '50%';
        bubble.style.transform = 'translateX(-50%)';
        
        kid.appendChild(bubble);
        
        // Animate in
        setTimeout(() => {
            bubble.classList.add('show');
        }, 50);
        
        // Remove after 3 seconds
        setTimeout(() => {
            bubble.classList.remove('show');
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.remove();
                }
            }, 300);
        }, 3000);
    }

    function startGame() {
        document.getElementById('startScreen').style.display = 'none';
        gameRunning = true;
        score = 0;
        timeLeft = 90;
        
        // Resume audio context
        if (audioContext.state === 'suspended') {
            audioContext.resume();
        }
        
        updateScore();
        updateTimer();
        
        gameTimer = setInterval(() => {
            timeLeft--;
            updateTimer();
            
            if (timeLeft <= 0) {
                endGame();
            }
        }, 1000);
        
        // More frequent spawning
        spawnTimer = setInterval(spawnCollectible, 800);
        
        // Speech bubble timer
        speechTimer = setInterval(() => {
            if (Math.random() < 0.3) { // 30% chance every 4 seconds
                const kid = Math.random() < 0.5 ? cassian : charlie;
                const message = encouragingMessages[Math.floor(Math.random() * encouragingMessages.length)];
                showSpeechBubble(kid, message);
            }
        }, 4000);
        
        // Initial welcome message
        setTimeout(() => {
            showSpeechBubble(cassian, "Go Mom! üí™");
        }, 1000);
        setTimeout(() => {
            showSpeechBubble(charlie, "Love you! üíï");
        }, 2000);
    }

    function spawnCollectible() {
        if (!gameRunning) return;
        
        const positiveTypes = ['book', 'coffee', 'healthy-snack', 'running-shoe', 'apple', 'water'];
        const negativeTypes = ['dirty-dish', 'laundry'];
        const allTypes = [...positiveTypes, ...negativeTypes];
        
        // 70% chance for positive, 30% for negative
        const isPositive = Math.random() < 0.7;
        const types = isPositive ? positiveTypes : negativeTypes;
        const type = types[Math.floor(Math.random() * types.length)];
        
        const collectible = document.createElement('div');
        collectible.className = `collectible ${type}`;
        
        // Spawn in safe areas (not too close to static elements)
        let x, y, attempts = 0;
        do {
            x = Math.random() * (window.innerWidth - 60) + 30;
            y = Math.random() * (window.innerHeight - 180) + 120;
            attempts++;
        } while (attempts < 10 && isNearStaticElement(x, y));
        
        collectible.style.left = x + 'px';
        collectible.style.top = y + 'px';
        
        gameContainer.appendChild(collectible);
        collectibles.push(collectible);
        
        // Remove after 6-12 seconds if not collected
        const lifetime = 6000 + Math.random() * 6000;
        setTimeout(() => {
            if (collectible.parentNode) {
                collectible.parentNode.removeChild(collectible);
                const index = collectibles.indexOf(collectible);
                if (index > -1) collectibles.splice(index, 1);
            }
        }, lifetime);
    }

    function isNearStaticElement(x, y) {
        // Check if position is too close to tables or bookshelves
        const elements = document.querySelectorAll('.cafe-table, .bookshelf');
        for (let element of elements) {
            const rect = element.getBoundingClientRect();
            const distance = Math.sqrt(Math.pow(x - (rect.left + rect.width/2), 2) + Math.pow(y - (rect.top + rect.height/2), 2));
            if (distance < 80) return true;
        }
        return false;
    }

    function checkCollisions() {
        collectibles.forEach((collectible, index) => {
            const rect1 = player.getBoundingClientRect();
            const rect2 = collectible.getBoundingClientRect();
            
            if (rect1.left < rect2.right && 
                rect1.right > rect2.left && 
                rect1.top < rect2.bottom && 
                rect1.bottom > rect2.top) {
                
                collectCollectible(collectible, index);
            }
        });
    }

    function collectCollectible(collectible, index) {
        const type = collectible.classList[1];
        let points = 0;
        let isNegative = false;
        
        switch(type) {
            case 'book': points = 25; break;
            case 'coffee': points = 20; break;
            case 'healthy-snack': points = 30; break;
            case 'running-shoe': points = 35; break;
            case 'apple': points = 15; break;
            case 'water': points = 15; break;
            case 'dirty-dish': points = -20; isNegative = true; break;
            case 'laundry': points = -25; isNegative = true; break;
        }
        
        score += points;
        updateScore();
        
        if (isNegative) {
            playNegativeSound();
            collectible.classList.add('flex-hit');
            createNegativeParticles(collectible);
            
            // Show negative speech bubble
            const kid = Math.random() < 0.5 ? cassian : charlie;
            const negativeMessages = ["Oh no! üò±", "Watch out! ‚ö†Ô∏è", "Avoid those! üö´"];
            const message = negativeMessages[Math.floor(Math.random() * negativeMessages.length)];
            showSpeechBubble(kid, message);
        } else {
            playCollectSound();
            createParticles(collectible);
            
            // Show positive speech bubble occasionally
            if (Math.random() < 0.4) {
                const kid = Math.random() < 0.5 ? cassian : charlie;
                const positiveMessages = ["Great job! üåü", "Nice one! üëè", "Keep going! üí™", "Awesome! ‚≠ê"];
                const message = positiveMessages[Math.floor(Math.random() * positiveMessages.length)];
                showSpeechBubble(kid, message);
            }
        }
        
        // Remove collectible
        setTimeout(() => {
            if (collectible.parentNode) {
                collectible.parentNode.removeChild(collectible);
            }
        }, 100);
        collectibles.splice(index, 1);
    }

    function createParticles(element) {
        const rect = element.getBoundingClientRect();
        for (let i = 0; i < 12; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = (rect.left + rect.width/2 + Math.random() * 40 - 20) + 'px';
            particle.style.top = (rect.top + rect.height/2 + Math.random() * 40 - 20) + 'px';
            document.body.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 3000);
        }
    }

    function createNegativeParticles(element) {
        const rect = element.getBoundingClientRect();
        for (let i = 0; i < 8; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle negative-particle';
            particle.style.left = (rect.left + rect.width/2 + Math.random() * 30 - 15) + 'px';
            particle.style.top = (rect.top + rect.height/2 + Math.random() * 30 - 15) + 'px';
            document.body.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 2000);
        }
    }

    function updateScore() {
        document.getElementById('score').textContent = `Score: ${score}`;
    }

    function updateTimer() {
        document.getElementById('timer').textContent = `Time: ${timeLeft}`;
    }

    function endGame() {
        gameRunning = false;
        clearInterval(gameTimer);
        clearInterval(spawnTimer);
        clearInterval(speechTimer);
        
        playWinSound();
        
        // Final encouraging messages from kids
        showSpeechBubble(cassian, "You did great! üèÜ");
        showSpeechBubble(charlie, "Love you Mom! üíï");
        
        let finalMessage = "";
        if (score >= 500) {
            finalMessage = winMessages[0];
        } else if (score >= 200) {
            finalMessage = winMessages[1];
        } else {
            finalMessage = winMessages[2];
        }
        
        setTimeout(() => {
            showPopup("üéâ Game Complete! üéâ", 
                `${finalMessage}<br><br>Final Score: ${score}<br>You're amazing at 33! üíï<br><br>Cassian and Charlie are so proud of you!`);
        }, 2000);
    }

    function showPopup(title, message) {
        document.getElementById('popupTitle').textContent = title;
        document.getElementById('popupMessage').innerHTML = message;
        document.getElementById('popup').style.display = 'block';
    }

    function closePopup() {
        document.getElementById('popup').style.display = 'none';
    }

    // Game loop
    function gameLoop() {
        if (gameRunning) {
            checkCollisions();
            updateKidsPositions();
        }
        requestAnimationFrame(gameLoop);
    }

    // Initialize everything
    window.addEventListener('load', () => {
        initGame();
        gameLoop();
    });

    // Handle orientation changes
    window.addEventListener('orientationchange', () => {
        setTimeout(() => {
            playerX = Math.min(playerX, window.innerWidth - 75);
            playerY = Math.min(playerY, window.innerHeight - 75);
            updatePlayerPosition();
        }, 100);
    });
</script>
</body> </html> </html> <css> /* All CSS is included in the HTML above for easier deployment */ </css> <javascript> /* All JavaScript is included in the HTML above for easier deployment */ </javascript>
